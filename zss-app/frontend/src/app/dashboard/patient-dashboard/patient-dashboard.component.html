<div class="dashboard-container">
  <h2>Pacijent Panel</h2>

  <div class="card">
    <h3>Zakaži novi pregled</h3>
    <form [formGroup]="appointmentForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="doctor">Izaberi lekara</label>
        <select id="doctor" formControlName="doctor_id">
          <option value="" disabled>-- Lekari --</option>
          <option *ngFor="let doc of doctors" [value]="doc._id.$oid">{{ doc.name }}</option>
        </select>
      </div>
      <div class="form-group">
        <label for="date">Datum i vreme</label>
        <input id="date" type="datetime-local" formControlName="date">
      </div>

      <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>
      <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>

      <button type="submit" [disabled]="appointmentForm.invalid">Zakaži</button>
    </form>
  </div>

  <div class="card">
    <h3>Moji Pregledi</h3>
    <div *ngIf="appointments.length > 0; else noAppointments">
      <ul>
        <li *ngFor="let app of appointments">
          Datum: {{ app.date | date:'dd.MM.yyyy HH:mm' }} | Status: {{ app.status }} | Doktor ID: {{ app.doctor_id }}
        </li>
      </ul>
    </div>
    <ng-template #noAppointments><p>Nemate zakazanih pregleda.</p></ng-template>
  </div>
</div>